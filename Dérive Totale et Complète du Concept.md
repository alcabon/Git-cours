# OUI ! D√©rive Totale et Compl√®te du Concept Ship/Show/Ask

**R√©ponse directe : C'est une INCOMPR√âHENSION TOTALE du concept.**

Ce serait comme prendre le nom "Agile" et faire du Waterfall avec post-its. üö®

---

## üéØ Les Deux Mondes (Incompatibles)

### Ship/Show/Ask ORIGINAL (Correct) ‚úÖ

```
main (seule branche long-lived)
  ‚Üë
ship/fix-bug (√©ph√©m√®re, auto-merge)
show/refactor (√©ph√©m√®re, 1 review)
ask/architecture (√©ph√©m√®re, discussion)

‚Üí Toutes ces branches mergent dans main
‚Üí Puis supprim√©es
‚Üí UNE SEULE source de v√©rit√©
```

### "Ship/Show/Ask" D√âVI√â (Anti-pattern) ‚ùå

```
ship (branche d'environnement long-lived) ‚Üê H√âR√âSIE !
show (branche d'environnement long-lived) ‚Üê H√âR√âSIE !
ask (branche d'environnement long-lived)  ‚Üê H√âR√âSIE !

release/v1.2.x merg√©e ind√©pendamment dans:
  ‚Üí ship
  ‚Üí show  
  ‚Üí ask

= Anti-pattern #0 avec des noms fancy !
```

---

## üî• La D√©rive Compl√®te Illustr√©e

### Sc√©nario Cauchemar (Quelqu'un Qui N'a Rien Compris)

```bash
# ‚ùå Consultant/Architecte qui a mal compris Ship/Show/Ask

# "Ship = environnement rapide (dev)"
git checkout -b ship main
# Branche PERMANENTE nomm√©e "ship"

# "Show = environnement de review (UAT)"  
git checkout -b show main
# Branche PERMANENTE nomm√©e "show"

# "Ask = environnement de production (besoin approbation)"
git checkout -b ask main
# Branche PERMANENTE nomm√©e "ask"

# Puis workflow "release"
git checkout -b release/SPRING25 main

# Merge release dans "ship" (dev)
git checkout ship
git merge release/SPRING25

# Merge release dans "show" (uat) - IND√âPENDAMMENT
git checkout show
git merge release/SPRING25

# Merge release dans "ask" (prod) - IND√âPENDAMMENT
git checkout ask
git merge release/SPRING25

# üî• CATASTROPHE : Anti-pattern #0 avec branding Ship/Show/Ask
```

### Visualisation du D√©sastre

```mermaid
graph TD
    M[main]
    R[release/SPRING25]
    
    S[ship<br/>branche permanente ‚ùå]
    SH[show<br/>branche permanente ‚ùå]
    A[ask<br/>branche permanente ‚ùå]
    
    R -.->|Merge #1| S
    R -.->|Merge #2| SH
    R -.->|Merge #3| A
    
    S --> |Divergence V1| SO[Ship Org]
    SH --> |Divergence V2| SHO[Show Org]
    A --> |Divergence V3| AO[Ask Org]
    
    style R fill:#FF0000,color:white
    style S fill:#FF6B6B
    style SH fill:#FF6B6B
    style A fill:#FF6B6B
    style SO fill:#FFB6B6
    style SHO fill:#FFB6B6
    style AO fill:#FFB6B6
```

**C'est litt√©ralement l'anti-pattern #0 avec des noms diff√©rents !**

---

## üíÄ Pourquoi C'est Une D√©rive Totale

### Les Principes Viol√©s

| Principe Ship/Show/Ask | D√©rive | Violation |
|------------------------|--------|-----------|
| **UNE branche long-lived** | 3+ branches long-lived | ‚ùå Fondamental |
| **Branches √©ph√©m√®res** | Branches permanentes | ‚ùå Fondamental |
| **Pr√©fixes = type de change** | Pr√©fixes = environnements | ‚ùå Conceptuel |
| **Auto-merge ship** | Merge manuel entre envs | ‚ùå Workflow |
| **Contexte dans le nom** | Mapping org | ‚ùå S√©mantique |

**Score de fid√©lit√© au concept : 0/5** üö´

---

## üé≠ Comment Cette D√©rive Pourrait Arriver

### Sc√©nario 1 : Consultant Mal Inform√©

```
Consultant : "J'ai entendu parler de Ship/Show/Ask, c'est moderne !"

*Lit un r√©sum√© de 2 lignes*

Consultant : "Ah, ship = rapide, show = review, ask = approbation"
             "Donc ship = dev, show = UAT, ask = prod !"
             "Cr√©ons des branches !"

Client : "OK vous √™tes l'expert"

‚Üí D√©rive compl√®te
```

### Sc√©nario 2 : Malentendu Marketing

```
Outil DevOps : "Support Ship/Show/Ask workflows !"

*Documentation ambigu√´*

PM lit : "Ship/Show/Ask pour g√©rer vos environnements"

PM pense : "Ah, ship/show/ask = noms pour dev/uat/prod"

√âquipe impl√©mente : Branches long-lived nomm√©es ship/show/ask

‚Üí Anti-pattern avec branding moderne
```

### Sc√©nario 3 : Hybridation Malheureuse

```
√âquipe actuelle : Environment Branches (int/uat/prod)

Tech Lead d√©couvre : Ship/Show/Ask

Tech Lead pense : "On peut combiner !"
                  "Renommons int‚Üíship, uat‚Üíshow, prod‚Üíask"
                  "Moderne !"

‚Üí M√™me anti-pattern, nouveaux noms
```

---

## üîç D√©tection de la D√©rive

### Checklist de Validation

```bash
# ‚úÖ Ship/Show/Ask CORRECT
git branch -a
# * main
#   remotes/origin/main
#   remotes/origin/ship/fix-123     (√©ph√©m√®re)
#   remotes/origin/show/refactor-456 (√©ph√©m√®re)
#   remotes/origin/ask/breaking-789  (√©ph√©m√®re)

# Nombre de branches long-lived
git branch -r | grep -v "ship/\|show/\|ask/\|main" | wc -l
# 0  ‚Üê Correct !

# ‚ùå Ship/Show/Ask D√âVI√â
git branch -a
# * main
#   ship       ‚Üê ALERTE !
#   show       ‚Üê ALERTE !
#   ask        ‚Üê ALERTE !

# Check des merges
git log ship --oneline | head -5
# abc123 Merge branch 'release/SPRING25' into ship  ‚Üê CATASTROPHE !

# Check divergence
git log ship..show --oneline | wc -l
# 15  ‚Üê Les branches ont diverg√© !
```

### Script d'Audit

```bash
#!/bin/bash
# detect-ship-show-ask-drift.sh

echo "üîç V√©rification Ship/Show/Ask"
echo "=============================="

# Check branches long-lived
LONG_LIVED=$(git branch -r | grep -E "origin/(ship|show|ask)$")

if [ -n "$LONG_LIVED" ]; then
  echo "üö® ALERTE : Branches long-lived d√©tect√©es !"
  echo "$LONG_LIVED"
  echo ""
  echo "‚ùå D√âRIVE TOTALE : Ship/Show/Ask utilise des PR√âFIXES (ship/*)"
  echo "   PAS des branches permanentes nomm√©es 'ship', 'show', 'ask'"
  echo ""
  echo "Vous avez confondu Ship/Show/Ask avec Environment Branches"
  exit 1
fi

# Check pr√©fixes corrects
EPHEMERAL=$(git branch -r | grep -E "origin/(ship|show|ask)/.+")

if [ -n "$EPHEMERAL" ]; then
  echo "‚úÖ Branches √©ph√©m√®res Ship/Show/Ask d√©tect√©es"
  echo "$EPHEMERAL"
  echo ""
  echo "‚úÖ Usage correct du pattern"
  exit 0
fi

echo "‚ÑπÔ∏è  Aucune branche Ship/Show/Ask d√©tect√©e"
echo "   (OK si vous n'utilisez pas ce pattern)"
```

---

## üìö Documentation Claire (Pour √âviter la D√©rive)

### README.md Explicite

```markdown
# Ship/Show/Ask Workflow

## ‚ö†Ô∏è ATTENTION : Lecture Obligatoire

### CE QUE C'EST ‚úÖ

Ship/Show/Ask est une **convention de nommage** pour branches √©ph√©m√®res
dans GitHub Flow standard.

- **UNE** seule branche long-lived : `main`
- Branches √©ph√©m√®res avec pr√©fixes : `ship/*`, `show/*`, `ask/*`
- Toutes mergent dans `main` puis sont **supprim√©es**

### CE QUE CE N'EST PAS ‚ùå

Ship/Show/Ask n'est **PAS** :
- ‚ùå Trois branches permanentes nomm√©es `ship`, `show`, `ask`
- ‚ùå Un syst√®me d'environnements (dev/uat/prod)
- ‚ùå Une architecture multi-branches
- ‚ùå Un replacement pour Environment Branches

### Exemples CORRECTS ‚úÖ

```bash
# Hotfix urgent
git checkout -b ship/fix-security-cve main
git commit -m "fix: patch XSS vulnerability"
# PR ‚Üí main ‚Üí auto-merge ‚Üí branche supprim√©e

# Refactoring
git checkout -b show/clean-controller main  
git commit -m "refactor: split UserController"
# PR ‚Üí main ‚Üí 1 review ‚Üí merge ‚Üí branche supprim√©e

# Architecture
git checkout -b ask/migrate-to-graphql main
git commit -m "feat: introduce GraphQL API"
# PR ‚Üí main ‚Üí discussion + 2 reviews ‚Üí merge ‚Üí branche supprim√©e
```

### Exemples INCORRECTS ‚ùå

```bash
# ‚ùå NE JAMAIS FAIRE CECI
git checkout -b ship main       # Branche sans suffixe
git checkout -b show main       # Branche sans suffixe
git checkout -b ask main        # Branche sans suffixe

# ‚ùå NE JAMAIS FAIRE CECI
git checkout ship
git merge release/v1.2.x        # Merge release dans "ship"

# C'est un anti-pattern Environment Branches d√©guis√© !
```

### √âtat du Repository

Votre repository devrait TOUJOURS ressembler √† √ßa :

```bash
git branch -a
# * main                          ‚Üê Seule branche permanente
#   remotes/origin/main
#   remotes/origin/ship/fix-123   ‚Üê √âph√©m√®re (bient√¥t supprim√©e)
#   remotes/origin/show/refactor  ‚Üê √âph√©m√®re (bient√¥t supprim√©e)

# JAMAIS √ßa :
# * main
#   ship      ‚Üê ‚ùå ERREUR !
#   show      ‚Üê ‚ùå ERREUR !
#   ask       ‚Üê ‚ùå ERREUR !
```
```

---

## üõ°Ô∏è Protection Contre la D√©rive

### 1. Branch Protection Rules

```yaml
# .github/branch-protection.yml
rules:
  # Prot√©ger main
  - pattern: main
    protection:
      required_pull_request_reviews: 1
      dismiss_stale_reviews: true
  
  # INTERDIRE branches nomm√©es exactement ship/show/ask
  - pattern: ^(ship|show|ask)$
    protection:
      block_creation: true
      message: |
        ‚ùå ERREUR : Branches 'ship', 'show', 'ask' sont interdites.
        
        Ship/Show/Ask utilise des PR√âFIXES, pas des branches permanentes.
        
        Utilisez : ship/*, show/*, ask/*
        Exemple : ship/fix-bug, show/refactor, ask/new-feature
        
        Voir documentation : README.md#ship-show-ask-workflow
```

### 2. Git Hooks (Pre-push)

```bash
#!/bin/bash
# .git/hooks/pre-push

BRANCH=$(git symbolic-ref --short HEAD)

# Interdire push sur branches nomm√©es exactement ship/show/ask
if [[ "$BRANCH" =~ ^(ship|show|ask)$ ]]; then
  cat << EOF
üö® ERREUR CRITIQUE : Branch name violation

Vous essayez de pusher sur une branche nomm√©e '$BRANCH'.
Ceci est une D√âRIVE du pattern Ship/Show/Ask.

Ship/Show/Ask : Branches √âPH√âM√àRES avec pr√©fixes
  ‚úÖ Correct : ship/fix-bug, show/refactor, ask/architecture
  ‚ùå Incorrect : ship, show, ask (sans suffixe)

Les branches 'ship', 'show', 'ask' ne doivent PAS exister.

Action requise :
1. Renommer votre branche :
   git branch -m $BRANCH ${BRANCH}/descriptive-name
   
2. Ou si c'√©tait une erreur, supprimer :
   git branch -D $BRANCH

Documentation : README.md#ship-show-ask-workflow
EOF
  exit 1
fi

# V√©rifier que ship/show/ask ont un suffixe
if [[ "$BRANCH" =~ ^(ship|show|ask)/.+ ]]; then
  echo "‚úÖ Branche Ship/Show/Ask valide : $BRANCH"
  exit 0
fi
```

### 3. CI/CD Validation

```yaml
# .github/workflows/validate-branches.yml
name: Validate Branch Names

on:
  push:
    branches:
      - '**'
  pull_request:
    branches:
      - '**'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Check for drift
        run: |
          BRANCH="${{ github.ref_name }}"
          
          # Interdire branches exactement nomm√©es ship/show/ask
          if [[ "$BRANCH" =~ ^(ship|show|ask)$ ]]; then
            echo "üö® D√âRIVE D√âTECT√âE : Branch '$BRANCH' est interdite"
            echo ""
            echo "Ship/Show/Ask = pr√©fixes pour branches √©ph√©m√®res"
            echo "Pas de branches permanentes nomm√©es ship/show/ask"
            echo ""
            echo "Utilisez : ship/*, show/*, ask/*"
            exit 1
          fi
          
          # Alerter si des branches long-lived existent
          LONG_LIVED=$(git branch -r | grep -E "origin/(ship|show|ask)$" || true)
          
          if [ -n "$LONG_LIVED" ]; then
            echo "üö® ALERTE : Branches long-lived ship/show/ask d√©tect√©es"
            echo "$LONG_LIVED"
            echo ""
            echo "Action : Supprimer ces branches et cr√©er ship/*, show/*, ask/*"
            exit 1
          fi
          
          echo "‚úÖ Validation pass√©e"
```

---

## üìä Comparaison : Vrai vs Faux Ship/Show/Ask

| Aspect | Ship/Show/Ask VRAI ‚úÖ | Ship/Show/Ask D√âVI√â ‚ùå |
|--------|----------------------|------------------------|
| **Branches long-lived** | 1 (`main`) | 3+ (`ship`, `show`, `ask`) |
| **S√©mantique** | Type de changement | Environnement |
| **Cycle de vie** | Heures √† jours | Permanent |
| **Merge release** | Jamais (branches √©ph√©m√®res) | Oui (dans chaque "env") |
| **Suppression** | Automatique post-merge | Jamais |
| **Divergence** | Impossible | Garantie |
| **Complexit√©** | Simple (GitHub Flow) | Complexe (env branches) |
| **Score qualit√©** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê (anti-pattern) |

---

## üéØ R√©ponse D√©finitive √† Votre Question

> "Ship/Show/Ask qui cr√©erait des branches d'environnement en mergeant des release branches dans chacune aurait compl√®tement d√©vi√© du concept ?"

**OUI, COMPL√àTEMENT ET TOTALEMENT.**

Ce serait :
1. ‚ùå Une **incompr√©hension totale** du concept
2. ‚ùå Un **abus de nom** (branding moderne pour anti-pattern)
3. ‚ùå **L'anti-pattern #0** d√©guis√© avec des noms fancy
4. ‚ùå **Pire** que de garder int/uat/prod (au moins c'est honn√™te)
5. ‚ùå Une **fraude intellectuelle** ("on fait du moderne")

**Analogies :**
```
C'est comme :
- Appeler une architecture monolithique "microservices"
- Faire du waterfall avec des post-its et dire "on est agile"
- Utiliser FTP et dire "on fait du GitOps"
- Appeler une base de donn√©es Excel "big data"
```

**Ce ne serait pas une "variante" ou une "adaptation".**
**Ce serait une d√©rive conceptuelle compl√®te.**

---

## ‚úÖ Pour R√©sumer

### Ship/Show/Ask AUTHENTIQUE

```
Principe : GitHub Flow avec pr√©fixes intelligents
Branches : main (seule permanente) + ship/*, show/*, ask/* (√©ph√©m√®res)
Workflow : Branches ‚Üí main ‚Üí supprimer
Complexit√© : Simple
Qualit√© : Excellente
```

### "Ship/Show/Ask" D√âVI√â

```
Principe : Environment Branches renomm√©es
Branches : ship, show, ask (permanentes) = int, uat, prod
Workflow : release ‚Üí ship ‚Üí show ‚Üí ask (merges s√©quentiels ou pire, ind√©pendants)
Complexit√© : √âlev√©e
Qualit√© : Anti-pattern
Nom : Mensonge marketing
```

**Votre vigilance est PARFAITE.** üéØ

Cette d√©rive pourrait effectivement arriver si quelqu'un comprend mal le concept et l'applique √† tort √† des environnements Salesforce.

**Morale :** Les noms fancy ne rendent pas un anti-pattern meilleur. Un anti-pattern avec un nom moderne reste un anti-pattern. üö´

Avez-vous vu cette d√©rive quelque part, ou voulez-vous des outils pour l'emp√™cher dans votre organisation ?
